---
redirect_from:
  - "/reana"
title: |-
  MadMiner on REANA
pagenum: 23
prev_page:
  url: /tutorial_particle_physics/A3_reweighting_existing_samples.html
next_page:
  url: 
suffix: .md
search: workflow madminer locally part used scailfin reana run workflows clone both yadage also github ph ml sub docker installed install complete machine learning remotely metrics different execution its not bash git com inference making tracking mlflow certain into repositories containing separate those own parameters technologies dependencies interact command cli coordinates computational itself images dockerhub setup running want client need pip version aims provide example highly scalable experiments generate collision events perform data contains necessary elements integrates system called optionally save location currently split event generation wrapping parts construct distribution wrapper around allow us executable researchers option particular multiple times without

comment: "***PROGRAMMATICALLY GENERATED, DO NOT EDIT. SEE ORIGINAL FILES IN /content***"
---

    <main class="jupyter-page">
    <div id="page-info"><div id="page-title">MadMiner on REANA</div>
</div>
    
<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="MadMiner-on-REANA">MadMiner on REANA<a class="anchor-link" href="#MadMiner-on-REANA"> </a></h1><p>The workflow version of Madminer aims to provide a complete example of how Madminer can be used on highly scalable experiments to (1) generate collision events, and (2) perform Machine Learning inference on that data.</p>
<p>The workflow contains all the necessary elements to be run both locally (making use of Yadage) and remotely (making use of REANA). It also integrates with a metrics tracking system called MLFlow, that can, optionally, save certain Machine Learning metrics from run to run.</p>
<h2 id="Workflow-location">Workflow location<a class="anchor-link" href="#Workflow-location"> </a></h2><p>The workflow is currently split into 3 different GitHub repositories:</p>
<ul>
<li>Scailfin/madminer-workflow-ph: containing the event generation part.</li>
<li>Scailfin/madminer-workflow-ml: containing the inference part.</li>
<li>Scailfin/madminer-workflow: wrapping both parts to construct the complete workflow.</li>
</ul>
<p>The distribution of the workflow into 2 separate sub-workflows (PH and ML) with a wrapper around them, allow us to make both of those sub-workflow <strong>locally</strong> executable on their own. This way, researchers have the option to <strong>locally</strong> run a particular part of the complete workflow multiple times, and with different parameters, without having to deal with the uninterested part.</p>
<h2 id="Technologies">Technologies<a class="anchor-link" href="#Technologies"> </a></h2><p>Before jumping the different commands to interactuate with the workflow, some words about the technologies the workflow relies on:</p>
<ul>
<li><p><strong>Docker</strong>: used to encapsulate and isolate the dependencies and the small snippets of code that the workflow steps use to interact with Madminer (installed as one of the dependencies).*</p>
</li>
<li><p><strong>Yadage</strong>: a command line interface (CLI) tool that coordinates the execution of computational workflows locally. It also defines its own workflow specification language, which is the one in which the workflow itself is defined.</p>
</li>
<li><p><strong>REANA</strong>: a cloud-based platform that coordinates the execution of computational workflows remotely. It can be used to scale up the workflow execution increasing the values of the default parameters. It can be installed locally, although it requires some experience.</p>
</li>
<li><p><strong>MLFlow</strong>: external component used to store and track certain metrics of the Machine Learning part of the workflow, thanks to the use of its tracking-UI part. It is not part of the Madminer-workflow itself and its usage is optional.</p>
</li>
</ul>
<p><em>Note</em>: The Docker images used within the workflow have been already built and pushed to the Madminertool DockerHub account.Those images are of general purpose, and their maintenance / evolution remains a responsibility of the madminer-workflow developers, not the users.</p>
<h2 id="Workflow-setup">Workflow setup<a class="anchor-link" href="#Workflow-setup"> </a></h2><p>In order to setup the workflow locally, you can just clone the madminer-workflow repository,  as long as the two wrapped sub-workflows by running:</p>
<div class="highlight"><pre><span></span>git clone --recurse-submodules https://github.com/scailfin/madminer-workflow
</pre></div>
<p>This command will also clone the PH and ML sub-workflows inside the modules folder. You can also install them separately (if you want to interact with them in a separate manner), by running:</p>
<div class="highlight"><pre><span></span>git clone https://github.com/scailfin/madminer-workflow-ml
git clone https://github.com/scailfin/madminer-workflow-ph
</pre></div>
<p>Then, depending whether you want to run the workflow locally, or remotely, both Yadage and the reana-client CLI would need to be installed:</p>
<div class="highlight"><pre><span></span>pip3 install yadage
pip3 install reana-client
</pre></div>
<p>The official documentation, and the README files of these repositories recommend creating a Python virtual environment to install these packages. However, if your interaction with the project is going to be from a user perspective, this is not mandatory.</p>
<p>Finally, you would need to have Docker installed, as it will be used as the DockerHub image-pulling mechanism. Please follow the instructions on the Docker installation guide.</p>

</div>
</div>
</div>
</div>

 


    </main>
    